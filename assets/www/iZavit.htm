<!DOCTYPE html> 

<html> 

<head> 


    <title>iZavit - World Intelligence Agency</title>    
    
    <!--http://en.wikipedia.org/wiki/JQuery_Mobile-->

    <!-- Splash Screens http://stackoverflow.com/questions/7517443/eclipse-android-phonegap-config-xml-not-working 
    http://developer.android.com/guide/practices/screens_support.html -->

    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link type="text/css" href="jquery.mobile-1.2.0.min.css" rel="stylesheet" />
    <link type="text/css" href="Mobile.css" rel="stylesheet" />

    <script src="jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="jquery.mobile-1.2.0.min.js" type="text/javascript"></script>
    <script src="cordova-2.2.0.js" type="text/javascript"></script>
    <script src="JSON2.js" type="text/javascript"></script>
    
    <script src="LocalStorage.js" type="text/javascript"></script>
    <script src="iZavit.js" type="text/javascript"></script>
    <script src="utility.js" type="text/javascript"></script>

    <script src="jquery.uniform.js" type="text/javascript"></script>
    <link rel="stylesheet" href="uniform.default.css" type="text/css" media="screen" charset="utf-8" />

    <script type="text/javascript" charset="utf-8">

        //Anonymous functions
        //http://2007-2010.lovemikeg.com/2008/08/17/a-week-in-javascript-patterns-self-invocation/

        //http://stackoverflow.com/questions/11138501/phonegap-for-android-deviceready-not-working

        //http://jquerymobile.com/test/docs/pages/phonegap.html
        $(document).bind("mobileinit", function () {
            // Make your jQuery Mobile framework configuration changes here!
            $.support.cors = true; 
            $.mobile.allowCrossDomainPages = true;
        });

        //Preferences 
        //http://www.javacodegeeks.com/2011/01/android-quick-preferences-tutorial.html
        //http://simonmacdonald.blogspot.co.uk/2012/06/phongap-android-application-preferences.html

        $(document).ready(function () {
            //Add handlers for the click event. http://api.jquery.com/click/
        });

        document.addEventListener('deviceready', function () {

            //won't fire when you 
            //super.setBooleanProperty("loadInWebView", true);

            HideElement('imgALG');

            /*
            Before Cordova 2.2.0, the Connection object existed at: navigator.network.connection.
            To match the spec, this was changed to navigator.connection in 2.2.0.
            navigator.network.connection still exists, but is now deprecated and will be removed in a future release.
            Not true:
            navigator.connection.type does not work in Cordova 2.2.0
            */

            if (navigator.network.connection.type == Connection.NONE) {
                document.addEventListener("backbutton", quitiZavit, false);
                $.mobile.changePage($('#divNoNetwork'));
                navigator.splashscreen.hide();
            } else ping();

            //Application Settings via menubutton
            //http://docs.phonegap.com/en/1.7.0/cordova_events_events.md.html#menubutton
            document.addEventListener("menubutton", onMenuKeyDown, false);

        }, false);

    </script>

    <style type="text/css">
        /* http://stackoverflow.com/questions/8718384/why-is-my-header-text-being-truncated */
        .ui-header .ui-title {
            margin-right: 10%;
            margin-left: 10%;
        }    
    </style>

</head> 

<body> 
 

    <div data-role="page" id="first" data-theme="a">
 
        <div data-role="header">
            <h1 id="hIssueTitle">Issue title</h1>
        </div>
 
        <div data-role="content">  

            <div id="divIssueContext">
                Context 1
            </div>

            <div id="divIssueContext2">
                Context 2
            </div>

            <div data-role="fieldcontain">
                <fieldset data-role="controlgroup">   
	                <label data-iconpos="right"><input type="checkbox" name="chkInteresting" id="chkInteresting" />This is interesting</label>
                    <label data-iconpos="right"><input type="checkbox" name="chkImportant" id="chkImportant" />This is important</label>
                    <label data-iconpos="right"><input type="checkbox" name="chkActionRequired" id="chkActionRequired" />We need action</label>
                </fieldset>
            </div>

            <button id="buttonVote" value="vote" data-inline="true"></button>
            <button id="buttonNextIssue" value="next" data-inline="true"></button>
            <img src="images/ajax-loader-Blue.gif" id="imgALG"/> 

            <span id="lblErrors" CssClass="Errors"></span>

        </div>
 
    </div>
 
    <div data-role="page" id="divNoNetwork" data-theme="b">
        <div data-role="header">
            <h1 id="h1">iZavit</h1>
        </div>
        <div  data-role="content" class="Information">
            <p>Please adjust your phone settings to allow iZavit to connect to the internet.</p>
            <p>You may need to enable WiFi or disable Flight Mode</p>
            <p>The iZavit app uses web services to retrieve data from and save data to a central database.</p>
            <p>Unfortunately a network conection cannot be detected at this time.</p>        
            <div>
                <button id="ButtonQuit" value="exit" data-inline="true"></button>
            </div>
        </div>
    </div>

    <div data-role="page" id="divSignIn" data-add-back-btn="true" data-theme="b">
 
        <div data-role="header">
                <h1 id="hSignInOrRegister">Sign in</h1>
        </div>
 
        <div data-role="content" class = "ui-hide-label">       

            <input type="text" id="tbEmailAddress" name="tbEmailAddress" placeholder="email address" value="alex@q2do.com" />
            <label for="tbEmailAddress">email</label>

            <input type="text" id="tbPassword" name="tbPassword" placeholder="password" value="pwavAg0" />
            <label for="tbPassword">password</label>

            <button id="buttonSignIn" value="sign in"></button>

            <p class="x-small">Your information is never shared with any other person or organisation without your permission.</p>

        </div>
 
    </div>

    <div data-role="page" id="divSettings" data-add-back-btn="true" data-theme="b">

        <div data-role="header">
            <h1>Settings</h1>
        </div>

        <div data-role="content" class = "ui-hide-label">
            <p>Issue Selection Type:</p>
            <fieldset data-role="controlgroup" data-type="horizontal" data-role="fieldcontain">
                        
                <input type="radio" id="rbtnViewNewIssues" name="ViewIssues"/>
                <label for="rbtnViewNewIssues">New</label> 
                        
                <input type="radio" id="rbtnViewUpdatableIssues" name="ViewIssues"/>
                <label for="rbtnViewUpdatableIssues">Updatable</label> 
                        
                <input type="radio" id="rbtnViewAllIssues" name="ViewIssues" />
                <label for="rbtnViewAllIssues">All</label> 
            </fieldset>  
        
        </div>
          
    </div>

    <script type="text/javascript">

        /* "Trick" to slide up all paragraphs

            $("p").click(function () {
            $(this).slideUp(); 
            });

        */

        $("#buttonSignIn").click(function () {
            SignIn($("#tbEmailAddress").val(), $("#tbPassword").val()) 
        });

        $("#buttonVote").click(function () {
            Vote();
        });

        $("#buttonNextIssue").click(function () {
            NextIssue();
        });

        $("#rbtnViewNewIssues").click(function () {
            IssueContendersSelect("N");
        });

        $("#rbtnViewUpdatableIssues").click(function () {
            IssueContendersSelect("U");
        });

        $("#rbtnViewAllIssues").click(function () {
            IssueContendersSelect("A");
        });

        $("#ButtonQuit").click(function () {
            quitiZavit();
        });
        

    </script> 

</body>

</html>